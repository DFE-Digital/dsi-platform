@inject IOptions<PlatformOptions> platformOptionsAccessor
@inject IOptions<AssetOptions> assetOptionsAccessor

<!DOCTYPE html>
<html lang="en" class="govuk-template govuk-template--rebranded">

<head>
    <meta charset="utf-8">
    <title>@ViewData[DsiLayoutConstants.Title] - DfE Sign-in</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="theme-color" content="#1d70b8">

    @if (@ViewData[DsiLayoutConstants.MetaDescription] is string metaDescription &&
        !string.IsNullOrEmpty(metaDescription))
    {
        <meta name="description" content="@metaDescription">
    }

    <link rel="stylesheet" href="@(assetOptionsAccessor.Value.BaseAddress)styles/main.css">

    <link rel="icon" sizes="48x48" href="@(assetOptionsAccessor.Value.BaseAddress)assets/rebrand/images/favicon.ico">
    <link rel="icon" sizes="any" href="@(assetOptionsAccessor.Value.BaseAddress)assets/rebrand/images/favicon.svg" type="image/svg+xml">
    <link rel="mask-icon" href="@(assetOptionsAccessor.Value.BaseAddress)assets/rebrand/images/govuk-icon-mask.svg" color="#1d70b8">
    <link rel="apple-touch-icon" href="@(assetOptionsAccessor.Value.BaseAddress)assets/rebrand/images/govuk-icon-180.png">
    <link rel="manifest" href="@(assetOptionsAccessor.Value.BaseAddress)assets/rebrand/manifest.json">

    <meta property="og:image" content="@(assetOptionsAccessor.Value.BaseAddress)images/opengraph-image.png">
</head>

<body class="govuk-template__body">
    <script asp-add-nonce>
        document.body.className += ' js-enabled' + ('noModule' in HTMLScriptElement.prototype ? ' govuk-frontend-supported' : '');
    </script>

    <partial name="~/Views/Shared/Partials/_EnvironmentBanner.cshtml" />

    <a href="#main-content" class="govuk-skip-link" data-module="govuk-skip-link">Skip to main content</a>
    <header class="govuk-header govuk-header--full-width-border" data-module="govuk-header">
        <div class="govuk-header__container govuk-width-container">
            <div class="govuk-header__logo">
               <a href="https://www.gov.uk/government/organisations/department-for-education" class="govuk-header__link govuk-header__link--homepage">
                    <img src="@(assetOptionsAccessor.Value.BaseAddress)assets/images/department-for-education_white.png" alt="Department for Education" class="govuk-header__logotype">
                </a>
            </div>

            <div class="govuk-header__content">
                <div class="app-header">

                    @if (@ViewData[DsiLayoutConstants.SignOutUrl] is not null)
                    {
                        <div class="app-auth-action">
                            <a class="app-auth-action__link" href="@ViewData[DsiLayoutConstants.SignOutUrl]">
                            Sign out
                            </a>
                        </div>
                    }
                </div>
            </div>
        </div>
    </header>

    <partial name="~/Views/Shared/Partials/_ServiceNavigation.cshtml" />

    <div class="govuk-width-container">
        <partial name="~/Views/Shared/Partials/_PhaseBanner.cshtml" />
    </div>

    @if (ViewData[DsiLayoutConstants.Hero] is HeroViewModel hero)
    {
        <div id="home-top" class="app-hero">
            <div class="govuk-width-container">
                <div class="govuk-grid-row">
                    <div class="govuk-grid-column-full">
                        <partial name="~/Views/Shared/Partials/_Crumbs.cshtml" />
                    </div>

                    <div class="govuk-grid-column-two-thirds">
                        <h1 class="govuk-heading-xl govuk-!-margin-top-5 govuk-!-margin-bottom-5">@hero.Heading</h1>
                    </div>
                    @if (!string.IsNullOrWhiteSpace(hero.Text))
                    {
                        <div class="govuk-grid-column-full">
                            <p class="govuk-body-l govuk-!-margin-bottom-2">@hero.Text</p>
                        </div>
                    }
                </div>
            </div>
        </div>
    }
    else
    {
        <div class="govuk-width-container">
            <div class="govuk-grid-row">
                <div class="govuk-grid-column-full">
                    <partial name="~/Views/Shared/Partials/_Crumbs.cshtml" />
                </div>
            </div>
        </div>
    }

    <div class="govuk-width-container">
        <main class="govuk-main-wrapper" id="main-content">
            @RenderBody()
        </main>
    </div>

    <partial name="~/Views/Shared/Partials/_Footer.cshtml" />

    <script src="@(assetOptionsAccessor.Value.BaseAddress)scripts/main.min.js"></script>

    @await RenderSectionAsync("Scripts", required: false)
</body>

</html>
